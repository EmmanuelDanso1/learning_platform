{% extends "index.html" %}
{% block title %}Manage Newsletters{% endblock %}
{% block content %}
<div class="container my-5">
  <h2>Manage Newsletters</h2>
  <ul class="list-group">
    {% for n in newsletters %}
    <li class="list-group-item d-flex justify-content-between align-items-center">
      <div>
        <strong>{{ n.title }}</strong><br>
        <small>Sent on {{ n.created_on.strftime('%Y-%m-%d %H:%M') }}</small>
      </div>
      <div>
        <a href="{{ url_for('admin.view_newsletter', id=n.id) }}" class="btn btn-sm btn-info">View</a>
        <a href="{{ url_for('admin.edit_newsletter', id=n.id) }}" class="btn btn-sm btn-warning">Edit</a>
        <form action="{{ url_for('admin.delete_newsletter', id=n.id) }}" method="POST" class="d-inline" onsubmit="return confirm('Delete this newsletter?');">
          <button type="submit" class="btn btn-sm btn-danger">Delete</button>
        </form>
      </div>
    </li>
    {% else %}
    <li class="list-group-item">No newsletters yet.</li>
    {% endfor %}
  </ul>
</div>
{% endblock %}
