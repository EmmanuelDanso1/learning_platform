{% extends "admin/admin_base.html" %}
{% block title %}View Profile{% endblock %}

{% block content %}

<style>
    .profile-container {
        max-width: 900px;
        margin: 50px auto;
        text-align: center;
    }

    .profile-image {
        width: 200px;
        height: 200px;
        border-radius: 50%;
        overflow: hidden;
        border: 4px solid #002b5c;
        margin: 20px auto;
    }

    .profile-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .profile-details {
        margin-top: 30px;
        text-align: left;
    }

    .profile-row {
        display: flex;
        justify-content: space-between;
        margin-bottom: 20px;
    }

    .profile-col {
        width: 30%;
    }

    .profile-label {
        font-weight: bold;
        color: #002b5c;
        font-size: 16px;
    }

    .profile-value {
        font-size: 17px;
        margin-top: 5px;
    }

    .section-title {
        text-align: center;
        font-weight: bold;
        color: #002b5c;
        margin: 40px 0 20px;
        font-size: 20px;
    }

    .no-applications {
        text-align: center;
        font-style: italic;
        font-size: 17px;
    }
</style>

<div class="profile-container">

    <!-- Profile Image -->
    <div class="profile-image">
        {% if user.profile_pic %}
            <img src="{{ url_for('static', filename='uploads/users/user_' ~ user.id ~ '/profile/' ~ user.profile_pic) }}">
        {% else %}
            <img src="{{ url_for('static', filename='images/default-profile.webp') }}">
        {% endif %}
    </div>

    <!-- Personal Details -->
    <div class="profile-details">

        <div class="profile-row">
            <div class="profile-col">
                <div class="profile-label">First Name</div>
                <div class="profile-value">{{ user.firstname or 'Not set' }}</div>
            </div>

            <div class="profile-col">
                <div class="profile-label">Surname</div>
                <div class="profile-value">{{ user.surname or 'Not set' }}</div>
            </div>

            <div class="profile-col">
                <div class="profile-label">Other Names</div>
                <div class="profile-value">{{ user.other_names or 'Not set' }}</div>
            </div>
        </div>

        <!-- Email / Phone / ID -->
        <div class="profile-row">
            <div class="profile-col">
                <div class="profile-label">E-mail Address</div>
                <div class="profile-value">{{ user.email }}</div>
            </div>

            <div class="profile-col">
                <div class="profile-label">Phone Number</div>
                <div class="profile-value">{{ user.phone or 'Not set' }}</div>
            </div>

        </div>

        <!-- Preferred Level / Subject / Docs -->
        <div class="profile-row">

            <!-- Preferred Level -->
            <div class="profile-col">
                <div class="profile-label">Preferred Level</div>

                {% if user.preferred_level %}
                    {% set levels = user.preferred_level.split(',') %}
                    <div class="profile-value">
                        {% for level in levels %}
                            <span>{{ level }}</span>{% if not loop.last %}, {% endif %}
                        {% endfor %}
                    </div>
                {% else %}
                    <div class="profile-value">Please select levels</div>
                {% endif %}
            </div>

            <!-- Preferred Subject -->
            <div class="profile-col">
                <div class="profile-label">Preferred Subject</div>

                {% if user.preferred_subject %}
                    {% set subjects = user.preferred_subject.split(',') %}
                    <div class="profile-value">
                        {% for s in subjects %}
                            <span style="
                                display:inline-block;
                                background:#002b5c;
                                color:#fff;
                                padding:5px 12px;
                                border-radius:8px;
                                margin:3px;
                                font-size:14px;
                            ">
                                {{ s }}
                            </span>
                        {% endfor %}
                    </div>
                {% else %}
                    <div class="profile-value">Please select subjects</div>
                {% endif %}
            </div>

            <!-- CV -->
            <div class="profile-col">
                <div class="profile-label">CV</div>
                {% if user.cv %}
                    <div class="profile-value">
                        <a href="{{ url_for('static',
                            filename='uploads/users/user_' ~ user.id ~ '/documents/' ~ user.cv) }}"
                            target="_blank">
                            View CV
                        </a>
                    </div>
                {% else %}
                    <div class="profile-value">CV Not Uploaded</div>
                {% endif %}
            </div>

            <!-- Certificate -->
            <div class="profile-col">
                <div class="profile-label">Certificate</div>
                {% if user.certificate %}
                    <div class="profile-value">
                        <a href="{{ url_for('static',
                            filename='uploads/users/user_' ~ user.id ~ '/documents/' ~ user.certificate) }}"
                            target="_blank">
                            View Certificate
                        </a>
                    </div>
                {% else %}
                    <div class="profile-value">Certificate Not Uploaded</div>
                {% endif %}
            </div>

        </div>


    </div>


    </div>

{% endblock %}
